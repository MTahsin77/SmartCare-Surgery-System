{% extends 'base.html' %}

{% block content %}
<h1>Admin Dashboard</h1>

<section>
    <h2>Turnover Reports</h2>
    <form method="post">
        {% csrf_token %}
        <label for="start_date">Start Date:</label>
        <input type="date" id="start_date" name="start_date" value="{{ start_date|date:'Y-m-d' }}">
        <label for="end_date">End Date:</label>
        <input type="date" id="end_date" name="end_date" value="{{ end_date|date:'Y-m-d' }}">
        <button type="submit">Generate Report</button>
    </form>

    <h3>Daily Turnover</h3>
    <ul>
    {% for day in daily_turnover %}
        <li>{{ day.date_issued__date|date:"F d, Y" }}: ${{ day.total }}</li>
    {% endfor %}
    </ul>

    <h3>Weekly Turnover</h3>
    <ul>
    {% for week in weekly_turnover %}
        <li>Week {{ week.date_issued__week }}: ${{ week.total }}</li>
    {% endfor %}
    </ul>

    <h3>Monthly Turnover</h3>
    <ul>
    {% for month in monthly_turnover %}
        <li>{{ month.date_issued__month|date:"F Y" }}: ${{ month.total }}</li>
    {% endfor %}
    </ul>
</section>

<section>
    <h2>Patient Statistics</h2>
    <ul>
    {% for stat in patient_stats %}
        <li>{{ stat.patient__user_type }}: {{ stat.count }} appointments</li>
    {% endfor %}
    </ul>
</section>

<section>
    <h2>Quick Links</h2>
    <ul>
        <li><a href="{% url 'manage_users' %}">Manage Users</a></li>
        <li><a href="{% url 'gp_list' %}">Manage GPs</a></li>
        <a href="{% url 'manage_appointments' %}">Manage Appointments</a> <br>
        <a href="{% url 'pending_registrations' %}">View Pending Registrations</a>
    </ul>
</section>
{% endblock %}
